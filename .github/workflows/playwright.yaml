name: Playwright Tests
on:
  push:
    branches : [main]
  pull_request:
    branches : [main]
  jobs:
    test:
      timeout-minutes: 60
      runs--on: windows-latest
      steps:
        uses: actions/checkout@v4
        uses: actions/setup-note@v4
      with:
        node-version: lts/*
      
      name: Install dependencies
      run: npm ci

      name: Install Playwright Browsers
      run: npx playwright install --with-deps
      
      name: Run Playwright setup
      run: npx test:setup

      name: Run Playwright sanity tests
      run: npx test:sanity

      uses: actions/upload-artifact@v4
      if: ${{!cancelled()}}
      with:
        name: plawright-report
        path: playwright-report/
        retention-days: 30

